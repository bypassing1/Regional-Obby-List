<!DOCTYPE html>
<html lang="en" class="account-html">
<head class="account-head">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <title>Login & Register</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2277894072143897"
        crossorigin="anonymous"></script>
    <meta name="author" content="bypassing1" />
    <meta property="og:title" content="Elite Indonesian Obbyist List" />
    <meta property="og:description"
        content="You can login or register your account on obbylist here!" />
    <meta property="og:url" content="https://bypassing1.github.io/The-Obbyist-List/eio-list.html" />
    <meta property="og:image" id="og-image"
        content="https://cdn.discordapp.com/attachments/1246327728588849162/1251096040204140596/image.png?ex=666d557c&is=666c03fc&hm=a8381dedaf892f4986a3aaf37147c81cb90227077ce3f5dd5ea650d0f64787b2&" />
    <meta property="og:type" content="website" />
</head>
<body>
    <div class="img"></div>
    <header>
        <div class="nav-container">
            <div class="info-text">
                <a href="index">The <span>Obbyists</span> List</a>
            </div>
            <div class="nav-group">
                <div class="nav" id="home">
                    <a href="index">
                        <img src="assets/home.svg" class="flag-icon">
                        <h3 class="nav-title">Home</h3>
                    </a>
                </div>
                <div class="dropdown">
                    <button class="dropbtn" onclick="toggleDropdown()">
                        <img src="assets/country.svg" class="flag-icon" />
                        <h3 class="nav-title">Universal List</h3>
                    </button>
                    <div class="dropdown-content" id="dropdownContent">
                        <a href="universal-list">Universal List</a>
                        <a href="eio-list">Indonesian List</a>
                        <a href="voc-list">Vietnamese List</a>
                        <a href="ukr-list">Ukraine List</a>
                        <a href="koc-list">Korean List</a>
                        <a href="mys-list">Malaysian List</a>
                    </div>
                </div>
                <div class="nav">
                    <a href="statistics">
                        <img src="assets/stats.svg" class="flag-icon" />
                        <h3 class="nav-title">Player Stats</h3>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="loader"></div>
    <div class="top-block"></div>
    <div class="account-body">
    <div class="account-container">
        <div class="account-tabs">
            <div class="account-tab active" id="login-tab">Login</div>
            <div class="account-tab" id="register-tab">Register</div>
        </div>
        
        <div class="account-form-container">
            <form class="account-form active" id="login-form">
                <div class="account-form-group">
                    <label class="account-label" for="login-username">Username ( ROBLOX USERNAME )</label>
                    <input class="account-input" type="text" id="login-username" placeholder="Enter your username" required>
                    <div class="account-error-message" id="login-username-error"></div>
                </div>
                
                <div class="account-form-group">
                    <label class="account-label" for="login-password">Password</label>
                    <input class="account-input" type="password" id="login-password" placeholder="Enter your password" required>
                    <div class="account-error-message" id="login-password-error"></div>
                </div>
                
                <button type="submit" class="account-button account-login-button">Login</button>
                <div class="account-success-message" id="login-success">Login successful!</div>
            </form>
            
            <form class="account-form" id="register-form">
                <div class="account-form-group">
                    <label class="account-label" for="register-username">Username ( ROBLOX USERNAME )</label>
                    <input class="account-input" type="text" id="register-username" placeholder="Choose a username" required>
                    <div class="account-error-message" id="register-username-error"></div>
                </div>
                
                <div class="account-form-group">
                    <label class="account-label" for="register-region">Region</label>
                    <select class="account-select" id="register-region" required>
                        <option class="account-option" value="" disabled selected>Select your region</option>
                        <option class="account-option" value="id">Indonesia</option>
                        <option class="account-option" value="vn">Vietnam</option>
                        <option class="account-option" value="ukr">Ukraine</option>
                        <option class="account-option" value="kr">Malaysia</option>
                    </select>
                    <div class="account-error-message" id="register-region-error"></div>
                </div>
                
                <div class="account-form-group">
                    <label class="account-label" for="register-password">Password</label>
                    <input class="account-input" type="password" id="register-password" placeholder="Create a password" required>
                    <div class="account-error-message" id="register-password-error"></div>
                </div>
                
                <button type="submit" class="account-button account-register-button">Register</button>
                <div class="account-success-message" id="register-success">User added to pending, Verify to login</div>
            </form>
        </div>
    </div>
    <div class="account-overlay" id="verification-popup">
        <div class="account-popup">
            <div class="account-popup-header">
                <h3 class="account-popup-title">Verification Required</h3>
                <button class="account-popup-close" id="close-popup">&times;</button>
            </div>
            <div class="account-popup-body">
                <div class="account-popup-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L1 21h22L12 2zm0 4.6L19.1 19H4.9L12 6.6zm-1 5.4v4h2v-4h-2zm0 6v2h2v-2h-2z"/>
                    </svg>
                </div>
                <p class="account-popup-message">
                    To complete your registration, join the verification game.
                    <br><br>
                    This helps us verify you're a real person and protects our community.
                </p>
                <a href="https://www.roblox.com/games/110702083826441/Verification" target="_blank" class="account-popup-button">
                    Join Verification Game
                </a>
            </div>
            <div class="account-popup-footer">
                After joining the game, you can login.
            </div>
        </div>
    </div>
</div>
<script>
    window.addEventListener('DOMContentLoaded', () => {
    const loggedInUser = localStorage.getItem('loggedInUser');
    if (loggedInUser) {
        window.location.href = '/dashboard';
    }
});
</script>
    <script>
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const verificationPopup = document.getElementById('verification-popup');
        const closePopupBtn = document.getElementById('close-popup');
        const registerForm = document.getElementById('register-form');

        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
        });

        registerTab.addEventListener('click', () => {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
        });

        closePopupBtn.addEventListener('click', () => {
            verificationPopup.classList.remove('active');
        });

        verificationPopup.addEventListener('click', (e) => {
            if (e.target === verificationPopup) {
                verificationPopup.classList.remove('active');
            }
        });

        document.getElementById('login-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const username = document.getElementById('login-username').value;
    const password = document.getElementById('login-password').value;

    const response = await fetch('/api/account', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ mode: 'login', username, password })
    });

    const result = await response.json();

    if (response.ok) {
        checkmark('Logged in!')
        setTimeout(() => {
            localStorage.setItem('loggedInUser', username);
            window.location.href = '/dashboard';
                }, 1000);
    } else {
        fail('Login Failed!')
    }
});

document.getElementById('register-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const username = document.getElementById('register-username').value;
    const password = document.getElementById('register-password').value;
    const region = document.getElementById('register-region').value;

    const response = await fetch('/api/account', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ mode: 'register', username, password, region })
    });

    const result = await response.json();

    if (response.ok) {
        document.getElementById('register-success').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('register-success').style.display = 'none';
                    
                    verificationPopup.classList.add('active');
                }, 1000);
    } else {
        fail(result.message)
    }
});

    </script>
    <script src="script/loader.js"></script>
    <script src="script/dropdown.js"></script>
    <script src="script/animation.js"></script>
</body>
</html>